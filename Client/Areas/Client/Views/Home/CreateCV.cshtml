@{
    ViewData["Title"] = "Create CV";
    Layout = "~/Areas/Client/Views/Shared/_Layout.cshtml";
}

<div class="row">
    <div class="col-12">
        <div class="card shadow mb-4">
            <div class="card-header py-3">
                <h6 class="m-0 font-weight-bold text-primary">Create CV</h6>
            </div>
            <div class="card-body">
                <form id="cv-form">
                    <!-- Personal Information Section -->
                    <div class="card mb-4">
                        <div class="card-header">
                            <h6 class="mb-0 font-weight-bold">Personal Information</h6>
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="fullName" class="form-label">Full Name <span class="text-danger">*</span></label>
                                    <input type="text" class="form-control" id="fullName" required>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="email" class="form-label">Email <span class="text-danger">*</span></label>
                                    <input type="email" class="form-control" id="email" required>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="phone" class="form-label">Phone Number <span class="text-danger">*</span></label>
                                    <input type="tel" class="form-control" id="phone" required>
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="birthdate" class="form-label">Date of Birth</label>
                                    <input type="date" class="form-control" id="birthdate">
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-12 mb-3">
                                    <label for="address" class="form-label">Address</label>
                                    <input type="text" class="form-control" id="address">
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-12 mb-3">
                                    <label for="objective" class="form-label">Career Objective</label>
                                    <textarea class="form-control" id="objective" rows="3"></textarea>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Education Section -->
                    <div class="card mb-4">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h6 class="mb-0 font-weight-bold">Education</h6>
                            <button type="button" class="btn btn-sm btn-primary" id="addEducation">
                                <i class="fas fa-plus"></i> Add
                            </button>
                        </div>
                        <div class="card-body" id="educationContainer">
                            <div class="education-item mb-3 pb-3 border-bottom">
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">School <span class="text-danger">*</span></label>
                                        <input type="text" class="form-control" name="school[]" required>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">Major</label>
                                        <input type="text" class="form-control" name="major[]">
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">Start Date</label>
                                        <input type="date" class="form-control" name="eduStartDate[]">
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">End Date</label>
                                        <input type="date" class="form-control" name="eduEndDate[]">
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-12 mb-3">
                                        <label class="form-label">Description</label>
                                        <textarea class="form-control" name="eduDescription[]" rows="2"></textarea>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Work Experience Section -->
                    <div class="card mb-4">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h6 class="mb-0 font-weight-bold">Work Experience</h6>
                            <button type="button" class="btn btn-sm btn-primary" id="addExperience">
                                <i class="fas fa-plus"></i> Add
                            </button>
                        </div>
                        <div class="card-body" id="experienceContainer">
                            <div class="experience-item mb-3 pb-3 border-bottom">
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">Company Name</label>
                                        <input type="text" class="form-control" name="company[]">
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">Position</label>
                                        <input type="text" class="form-control" name="position[]">
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">Start Date</label>
                                        <input type="date" class="form-control" name="expStartDate[]">
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label class="form-label">End Date</label>
                                        <input type="date" class="form-control" name="expEndDate[]">
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-12 mb-3">
                                        <label class="form-label">Job Description</label>
                                        <textarea class="form-control" name="expDescription[]" rows="2"></textarea>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Skills Section -->
                    <div class="card mb-4">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h6 class="mb-0 font-weight-bold">Skills</h6>
                            <button type="button" class="btn btn-sm btn-primary" id="addSkill">
                                <i class="fas fa-plus"></i> Add
                            </button>
                        </div>
                        <div class="card-body" id="skillsContainer">
                            <div class="skill-item mb-3">
                                <div class="row align-items-center">
                                    <div class="col-md-5 mb-2">
                                        <input type="text" class="form-control" name="skillName[]" placeholder="Skill name">
                                    </div>
                                    <div class="col-md-5 mb-2">
                                        <select class="form-control" name="skillLevel[]">
                                            <option value="Basic">Basic</option>
                                            <option value="Intermediate">Intermediate</option>
                                            <option value="Good">Good</option>
                                            <option value="Excellent">Excellent</option>
                                        </select>
                                    </div>
                                    <div class="col-md-2 mb-2">
                                        <button type="button" class="btn btn-danger btn-sm remove-skill">
                                            <i class="fas fa-trash"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Certificate Section -->
                    <div class="card mb-4">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h6 class="mb-0 font-weight-bold">Certificates</h6>
                            <button type="button" class="btn btn-sm btn-primary" id="addCertificate">
                                <i class="fas fa-plus"></i> Add
                            </button>
                        </div>
                        <div class="card-body" id="certificateContainer">
                            <div class="certificate-item mb-3">
                                <div class="row align-items-center">
                                    <div class="col-md-5 mb-2">
                                        <input type="text" class="form-control" name="certificateName[]" placeholder="Certificate name">
                                    </div>
                                    <div class="col-md-5 mb-2">
                                        <input type="date" class="form-control" name="certificateDate[]">
                                    </div>
                                    <div class="col-md-2 mb-2">
                                        <button type="button" class="btn btn-danger btn-sm remove-certificate">
                                            <i class="fas fa-trash"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="text-center">
                        <button type="submit" class="btn btn-primary btn-lg px-5">
                            <i class="fas fa-save mr-2"></i> Save CV
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        $(document).ready(function() {
            // Check login
            var isLoggedIn = localStorage.getItem('isLoggedIn') === 'true';
            var userType = localStorage.getItem('userType');
            
            if (isLoggedIn && userType === 'candidate') {
                // Switch UI for candidate
                switchToCandidateUI();
            } else {
                // Redirect to login page
                window.location.href = '/Client/Home/Index';
            }
        
            // Add Education Entry
            $('#addEducation').click(function() {
                const newEducation = `
                    <div class="education-item mb-3 pb-3 border-bottom">
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label class="form-label">School <span class="text-danger">*</span></label>
                                <input type="text" class="form-control" name="school[]" required>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Major</label>
                                <input type="text" class="form-control" name="major[]">
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Start Date</label>
                                <input type="date" class="form-control" name="eduStartDate[]">
                            </div>
                            <div class="col-md-6 mb-3">
                                <label class="form-label">End Date</label>
                                <input type="date" class="form-control" name="eduEndDate[]">
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12 mb-3">
                                <label class="form-label">Description</label>
                                <textarea class="form-control" name="eduDescription[]" rows="2"></textarea>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12 text-right">
                                <button type="button" class="btn btn-danger btn-sm remove-education">
                                    <i class="fas fa-trash"></i> Remove
                                </button>
                            </div>
                        </div>
                    </div>
                `;
                $('#educationContainer').append(newEducation);
            });
            
            // Remove Education Entry
            $(document).on('click', '.remove-education', function() {
                $(this).closest('.education-item').remove();
            });
            
            // Add Work Experience Entry
            $('#addExperience').click(function() {
                const newExperience = `
                    <div class="experience-item mb-3 pb-3 border-bottom">
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Company Name</label>
                                <input type="text" class="form-control" name="company[]">
                            </div>
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Position</label>
                                <input type="text" class="form-control" name="position[]">
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Start Date</label>
                                <input type="date" class="form-control" name="expStartDate[]">
                            </div>
                            <div class="col-md-6 mb-3">
                                <label class="form-label">End Date</label>
                                <input type="date" class="form-control" name="expEndDate[]">
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12 mb-3">
                                <label class="form-label">Job Description</label>
                                <textarea class="form-control" name="expDescription[]" rows="2"></textarea>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-12 text-right">
                                <button type="button" class="btn btn-danger btn-sm remove-experience">
                                    <i class="fas fa-trash"></i> Remove
                                </button>
                            </div>
                        </div>
                    </div>
                `;
                $('#experienceContainer').append(newExperience);
            });
            
            // Remove Work Experience Entry
            $(document).on('click', '.remove-experience', function() {
                $(this).closest('.experience-item').remove();
            });
            
            // Add Skill Entry
            $('#addSkill').click(function() {
                const newSkill = `
                    <div class="skill-item mb-3">
                        <div class="row align-items-center">
                            <div class="col-md-5 mb-2">
                                <input type="text" class="form-control" name="skillName[]" placeholder="Skill name">
                            </div>
                            <div class="col-md-5 mb-2">
                                <select class="form-control" name="skillLevel[]">
                                    <option value="Basic">Basic</option>
                                    <option value="Intermediate">Intermediate</option>
                                    <option value="Good">Good</option>
                                    <option value="Excellent">Excellent</option>
                                </select>
                            </div>
                            <div class="col-md-2 mb-2">
                                <button type="button" class="btn btn-danger btn-sm remove-skill">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                `;
                $('#skillsContainer').append(newSkill);
            });
            
            // Remove Skill Entry
            $(document).on('click', '.remove-skill', function() {
                $(this).closest('.skill-item').remove();
            });
            
            // Add Certificate Entry
            $('#addCertificate').click(function() {
                const newCertificate = `
                    <div class="certificate-item mb-3">
                        <div class="row align-items-center">
                            <div class="col-md-5 mb-2">
                                <input type="text" class="form-control" name="certificateName[]" placeholder="Certificate name">
                            </div>
                            <div class="col-md-5 mb-2">
                                <input type="date" class="form-control" name="certificateDate[]">
                            </div>
                            <div class="col-md-2 mb-2">
                                <button type="button" class="btn btn-danger btn-sm remove-certificate">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                `;
                $('#certificateContainer').append(newCertificate);
            });
            
            // Remove Certificate Entry
            $(document).on('click', '.remove-certificate', function() {
                $(this).closest('.certificate-item').remove();
            });
            
            // Form Submission
            $('#cv-form').submit(function(e) {
                e.preventDefault();
                
                // Here you would normally collect all form data and send it to the server
                alert('CV saved successfully!');
            });
        });
    </script>
} 