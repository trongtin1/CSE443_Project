<!DOCTYPE html>
<html>
<head>
    @RenderSection("Styles", required: false)
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - Job Connect</title>
    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" />
    <link rel="stylesheet" href="~/css/client-site.css" />
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #fff;
        }
        
        .header-gradient {
            background-color: #F5E7E4;
            padding-bottom: 2rem;
        }
        
        .footer-gradient {
            background-color: #F5E7E4;
            padding: 2rem 0;
        }
        
        .navbar {
            background-color: transparent !important;
            padding: 1rem 2rem;
        }
        
        .navbar-brand {
            color: #333 !important;
            font-weight: bold;
            font-size: 1.5rem;
            display: flex;
            align-items: center;
        }
        
        .navbar-brand img {
            margin-right: 10px;
            height: 40px;
        }
        
        .nav-link {
            color: #333 !important;
            font-weight: 500;
            margin: 0 10px;
            transition: all 0.3s;
        }
        
        .btn-auth {
            border-radius: 20px;
            padding: 8px 20px;
            font-weight: 500;
            margin-left: 5px;
            background-color: rgba(0, 0, 0, 0.1);
            color: #333;
            border: none;
            transition: all 0.3s;
            cursor: pointer;
            outline: none;
        }
        
        .btn-auth:hover {
            background-color: rgba(0, 0, 0, 0.2);
            color: #333;
            transform: translateY(-2px);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }
        
        .btn-auth.active {
            background-color: #6C63FF;
            color: white;
        }
        
        .btn-auth.active:hover {
            background-color: #5a52e0;
            color: white;
            box-shadow: 0 2px 10px rgba(108, 99, 255, 0.3);
        }
        
        .content {
            min-height: calc(100vh - 300px);
            background-color: #fff;
            padding: 2rem 0;
        }

        .main-heading {
            color: #333;
        }

        .modal-header {
            background-color: #F5E7E4;
            color: #333;
        }

        .modal-footer {
            background-color: #f8f9fc;
        }

        .tab-pane {
            padding: 20px 0;
        }



        /* form */
        /* Thu nhỏ form modal */
        .modal-dialog {
            max-width: 600px;
            margin: 2rem auto;
        }

        /* Làm form gọn và dễ nhìn */
        .modal-content {
            border-radius: 1rem;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
            padding: 1.5rem;
            background-color: #fffaf8;
        }

        /* Canh giữa nội dung */
        .modal-body {
            padding: 1.5rem 2rem;
        }

        /* Style cho tab đăng ký */
        #registerTab {
            border-bottom: none;
            display: flex;
            justify-content: center;
            margin-bottom: 1.5rem;
        }

        #registerTab .nav-item {
            margin: 0 10px;
            padding: 0;
        }

        #registerTab .nav-link {
            border: none;
            border-radius: 20px;
            padding: 0.5rem 1.5rem;
            font-weight: 500;
            color: #666;
            transition: all 0.3s;
        }

        #registerTab .nav-link.active {
            background-color: #F5E7E4;
            color: #333;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
        }

        /* Làm ô input mượt và dễ nhập */
        .form-control {
            border-radius: 10px;
            padding: 0.75rem 1rem;
            font-size: 1rem;
            border: 1px solid #ddd;
            transition: border-color 0.3s;
            background-color: #fff;
            margin-bottom: 0.75rem;
        }

        .form-control:focus {
            border-color: #6C63FF;
            box-shadow: 0 0 0 0.2rem rgba(108, 99, 255, 0.1);
        }

        /* Style cho form label */
        .form-group label {
            font-weight: 500;
            font-size: 0.9rem;
            color: #555;
            margin-bottom: 0.5rem;
        }

        /* Điều chỉnh tiêu đề và khoảng cách */
        .modal-title {
            font-weight: bold;
            font-size: 1.25rem;
            color: #333;
            text-align: center;
            width: 100%;
        }

        .modal-header {
            border-bottom: none;
            padding-bottom: 0;
            justify-content: center;
            position: relative;
        }

        .modal-header .close {
            position: absolute;
            right: 1rem;
            top: 1rem;
            background: none;
            border: none;
            font-size: 1.5rem;
            opacity: 0.5;
            transition: opacity 0.3s;
        }

        .modal-header .close:hover {
            opacity: 1;
        }

        .modal-footer {
            justify-content: center;
            border-top: none;
            padding-top: 0;
        }

        /* Đẹp hơn cho nút submit */
        .btn-primary {
            background-color: #6C63FF;
            border: none;
            border-radius: 10px;
            padding: 0.75rem 1.5rem;
            font-weight: 500;
            transition: all 0.3s;
            box-shadow: 0 2px 6px rgba(108, 99, 255, 0.3);
        }

        .btn-primary:hover {
            background-color: #5a52e0;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(108, 99, 255, 0.4);
        }

        /* Style cho phần checkbox */
        .custom-control-label {
            font-size: 0.9rem;
            padding-left: 0.5rem;
        }

        .custom-control-input:checked ~ .custom-control-label::before {
            background-color: #6C63FF;
            border-color: #6C63FF;
        }

        /* Style cho radio buttons */
        .custom-radio .custom-control-label::before {
            border-color: #ccc;
        }

        .custom-radio .custom-control-input:checked ~ .custom-control-label::before {
            background-color: #6C63FF;
            border-color: #6C63FF;
        }

        /* Liên kết trong modal */
        .modal a {
            color: #6C63FF;
            text-decoration: none;
            transition: color 0.3s;
        }

        .modal a:hover {
            color: #5a52e0;
            text-decoration: underline;
        }

        /* Cải thiện khoảng cách giữa các form nhóm */
        .form-row {
            margin-bottom: 0.5rem;
        }

    </style>
</head>
<body>
    <div class="header-gradient">
        <nav class="navbar navbar-expand-lg">
            <div class="container">
                <a class="navbar-brand" href="#">
                    <img src="/Images/logo.jpg" alt="Logo" /> 
                    @* <div> *@
                    @*     JOB CONNECT  *@
                    @*     <small>EST. 2024</small> *@
                    @* </div> *@
                </a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav"
                    aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
                    <!-- Menu khi chưa đăng nhập -->
                    <ul class="navbar-nav" id="guest-menu">
                        <li class="nav-item">
                            <a class="nav-link" href="#">TRANG CHỦ</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#">VIỆC LÀM</a>
                        </li>
                    </ul>
                    
                    <!-- Menu cho ứng viên đã đăng nhập -->
                    <ul class="navbar-nav" id="candidate-nav" style="display: none;">
                        <li class="nav-item">
                            <a class="nav-link" href="#">TẠO CV</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#">TÌM VIỆC LÀM</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#">VIỆC ĐÃ LƯU</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#">VIỆC ĐÃ NỘP</a>
                        </li>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" id="userDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                <img src="https://via.placeholder.com/30" alt="Avatar" class="rounded-circle mr-1" style="width: 30px; height: 30px;">
                                <span class="candidate-name">TÀI KHOẢN</span>
                            </a>
                            <div class="dropdown-menu dropdown-menu-right" aria-labelledby="userDropdown">
                                <a class="dropdown-item" href="#">Hồ sơ cá nhân</a>
                                <a class="dropdown-item" href="#">Cài đặt</a>
                                <div class="dropdown-divider"></div>
                                <a class="dropdown-item" href="#" id="logoutBtn">Đăng xuất</a>
                            </div>
                        </li>
                    </ul>
                    
                    <!-- Nút đăng ký / đăng nhập (chỉ hiển thị khi chưa đăng nhập) -->
                    <div class="d-flex ml-auto" id="auth-buttons">
                        <button type="button" class="btn btn-auth" data-toggle="modal" data-target="#registerModal">ĐĂNG KÝ</button>
                        <button type="button" class="btn btn-auth active" data-toggle="modal" data-target="#loginModal">ĐĂNG NHẬP</button>
                    </div>
                </div>
            </div>
        </nav>
    </div>
        
    <div class="content">
        @RenderBody()
    </div>

    <div class="footer-gradient">
        <div class="container">
            <div class="row">
                <div class="col-md-4">
                    <h5>Về Chúng Tôi</h5>
                    <p class="text-muted">Kết nối ứng viên với nhà tuyển dụng hiệu quả.</p>
                </div>
                <div class="col-md-4">
                    <h5>Liên Hệ</h5>
                    <p class="text-muted">Email: contact@jobconnect.com</p>
                    <p class="text-muted">Điện thoại: 123-456-7890</p>
                </div>
                <div class="col-md-4">
                    <h5>Theo Dõi</h5>
                    <div>
                        <a href="#" class="text-muted mr-3"><i class="fab fa-facebook-f"></i></a>
                        <a href="#" class="text-muted mr-3"><i class="fab fa-twitter"></i></a>
                        <a href="#" class="text-muted mr-3"><i class="fab fa-linkedin-in"></i></a>
                    </div>
                </div>
            </div>
            <div class="row mt-3">
                <div class="col-12 text-center">
                    <p class="text-muted mb-0">&copy; 2024 Job Connect. Đã đăng ký bản quyền.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Register Modal -->
    <div class="modal fade" id="registerModal" tabindex="-1" role="dialog" aria-labelledby="registerModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="registerModalLabel">Đăng Ký Tài Khoản Ứng Viên</h5>
                    <button type="button" class="close" onclick="$('#registerModal').modal('hide');">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <ul class="nav nav-tabs mb-4" id="registerTab" role="tablist">
                        <li class="nav-item">
                            <a class="nav-link active" id="candidate-tab" data-toggle="tab" href="#candidate" role="tab" aria-controls="candidate" aria-selected="true">Ứng Viên</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" id="recruiter-tab" data-toggle="tab" href="#recruiter" role="tab" aria-controls="recruiter" aria-selected="false">Nhà Tuyển Dụng</a>
                        </li>
                    </ul>
                    <div class="tab-content" id="registerTabContent">
                        <div class="tab-pane fade show active" id="candidate" role="tabpanel" aria-labelledby="candidate-tab">
                            <form id="candidateRegisterForm">
                                <div class="form-row">
                                    <div class="form-group col-md-6">
                                        <label for="candidateName">Họ và Tên</label>
                                        <input type="text" class="form-control" id="candidateName" placeholder="Nhập họ và tên">
                                    </div>
                                    <div class="form-group col-md-6">
                                        <label for="candidateEmail">Email</label>
                                        <input type="email" class="form-control" id="candidateEmail" placeholder="Nhập email">
                                    </div>
                                </div>
                                <div class="form-row">
                                    <div class="form-group col-md-6">
                                        <label for="candidatePhone">Số Điện Thoại</label>
                                        <input type="tel" class="form-control" id="candidatePhone" placeholder="Nhập số điện thoại">
                                    </div>
                                    <div class="form-group col-md-6">
                                        <label for="candidateDOB">Ngày Sinh</label>
                                        <input type="date" class="form-control" id="candidateDOB">
                                    </div>
                                </div>
                                <div class="form-row">
                                    <div class="form-group col-md-6">
                                        <label for="candidatePassword">Mật Khẩu</label>
                                        <input type="password" class="form-control" id="candidatePassword" placeholder="Nhập mật khẩu">
                                    </div>
                                    <div class="form-group col-md-6">
                                        <label for="candidateConfirmPassword">Xác Nhận Mật Khẩu</label>
                                        <input type="password" class="form-control" id="candidateConfirmPassword" placeholder="Xác nhận mật khẩu">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="candidateAddress">Địa Chỉ</label>
                                    <input type="text" class="form-control" id="candidateAddress" placeholder="Nhập địa chỉ">
                                </div>
                                <div class="form-group">
                                    <div class="custom-control custom-checkbox">
                                        <input type="checkbox" class="custom-control-input" id="candidateTerms">
                                        <label class="custom-control-label" for="candidateTerms">Tôi đồng ý với <a href="#">điều khoản sử dụng</a> và <a href="#">chính sách bảo mật</a></label>
                                    </div>
                                </div>
                                <div class="d-flex justify-content-center">
                                    <button type="submit" class="btn btn-primary px-5">Đăng Ký</button>
                                </div>
                            </form>
                        </div>
                        <div class="tab-pane fade" id="recruiter" role="tabpanel" aria-labelledby="recruiter-tab">
                            <form id="recruiterRegisterForm">
                                <div class="form-row">
                                    <div class="form-group col-md-6">
                                        <label for="companyName">Tên Công Ty</label>
                                        <input type="text" class="form-control" id="companyName" placeholder="Nhập tên công ty">
                                    </div>
                                    <div class="form-group col-md-6">
                                        <label for="businessType">Loại Hình Doanh Nghiệp</label>
                                        <select class="form-control" id="businessType">
                                            <option value="" selected disabled>Chọn loại hình</option>
                                            <option value="corporation">Công ty cổ phần</option>
                                            <option value="limited">Công ty TNHH</option>
                                            <option value="private">Doanh nghiệp tư nhân</option>
                                            <option value="foreign">Doanh nghiệp có vốn đầu tư nước ngoài</option>
                                            <option value="other">Khác</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="form-row">
                                    <div class="form-group col-md-6">
                                        <label for="recruiterEmail">Email Công Ty</label>
                                        <input type="email" class="form-control" id="recruiterEmail" placeholder="Nhập email công ty">
                                    </div>
                                    <div class="form-group col-md-6">
                                        <label for="recruiterPhone">Số Điện Thoại Liên Hệ</label>
                                        <input type="tel" class="form-control" id="recruiterPhone" placeholder="Nhập số điện thoại">
                                    </div>
                                </div>
                                <div class="form-row">
                                    <div class="form-group col-md-6">
                                        <label for="recruiterPassword">Mật Khẩu</label>
                                        <input type="password" class="form-control" id="recruiterPassword" placeholder="Nhập mật khẩu">
                                    </div>
                                    <div class="form-group col-md-6">
                                        <label for="recruiterConfirmPassword">Xác Nhận Mật Khẩu</label>
                                        <input type="password" class="form-control" id="recruiterConfirmPassword" placeholder="Xác nhận mật khẩu">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label for="companyAddress">Địa Chỉ Công Ty</label>
                                    <input type="text" class="form-control" id="companyAddress" placeholder="Nhập địa chỉ công ty">
                                </div>
                                <div class="form-group">
                                    <label for="companyWebsite">Website Công Ty</label>
                                    <input type="url" class="form-control" id="companyWebsite" placeholder="Nhập website công ty (nếu có)">
                                </div>
                                <div class="form-group">
                                    <div class="custom-control custom-checkbox">
                                        <input type="checkbox" class="custom-control-input" id="recruiterTerms">
                                        <label class="custom-control-label" for="recruiterTerms">Tôi đồng ý với <a href="#">điều khoản sử dụng</a> và <a href="#">chính sách bảo mật</a></label>
                                    </div>
                                </div>
                                <div class="d-flex justify-content-center">
                                    <button type="submit" class="btn btn-primary px-5">Đăng Ký</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Login Modal -->
    <div class="modal fade" id="loginModal" tabindex="-1" role="dialog" aria-labelledby="loginModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="loginModalLabel">Đăng Nhập</h5>
                    <button type="button" class="close" onclick="$('#loginModal').modal('hide');">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <form id="loginForm">
                        <div class="form-group">
                            <label for="loginEmail">Email</label>
                            <input type="email" class="form-control" id="loginEmail" placeholder="Nhập email">
                        </div>
                        <div class="form-group">
                            <label for="loginPassword">Mật Khẩu</label>
                            <input type="password" class="form-control" id="loginPassword" placeholder="Nhập mật khẩu">
                        </div>
                        <div class="form-group form-check">
                            <input type="checkbox" class="form-check-input" id="rememberMe">
                            <label class="form-check-label" for="rememberMe">Nhớ đăng nhập</label>
                        </div>
                        <div class="form-group">
                            <div class="d-flex justify-content-between">
                                <div class="custom-control custom-radio custom-control-inline">
                                    <input type="radio" id="candidateType" name="userType" class="custom-control-input" value="candidate" checked>
                                    <label class="custom-control-label" for="candidateType">Ứng Viên</label>
                                </div>
                                <div class="custom-control custom-radio custom-control-inline">
                                    <input type="radio" id="recruiterType" name="userType" class="custom-control-input" value="recruiter">
                                    <label class="custom-control-label" for="recruiterType">Nhà Tuyển Dụng</label>
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <button type="submit" class="btn btn-primary btn-block py-2">Đăng Nhập</button>
                        </div>
                        <div class="text-center mt-3">
                            <a href="#" class="text-muted small">Quên mật khẩu?</a>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <p class="text-muted small mb-0">Bạn chưa có tài khoản? <a href="javascript:void(0);" onclick="$('#loginModal').modal('hide'); $('#registerModal').modal('show');">Đăng ký ngay</a></p>
                </div>
            </div>
        </div>
    </div>

    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js"></script>
    
    <script>
        // Kiểm tra jQuery
        if (typeof jQuery != 'undefined') {
            console.log("jQuery is loaded! Version: " + jQuery.fn.jquery);
        } else {
            console.log("jQuery is not loaded!");
        }
        
        // Kiểm tra Bootstrap Modal
        if (typeof $.fn.modal != 'undefined') {
            console.log("Bootstrap Modal is loaded!");
        } else {
            console.log("Bootstrap Modal is not loaded!");
        }
        
        $(document).ready(function() {
            console.log("Document is ready!");
            
            // Xử lý đóng modal đăng ký
            $('#closeRegisterModal').on('click', function() {
                console.log("Close register modal button clicked");
                $('#registerModal').modal('hide');
            });
            
            // Xử lý đóng modal đăng nhập
            $('#closeLoginModal').on('click', function() {
                console.log("Close login modal button clicked");
                $('#loginModal').modal('hide');
            });
            
            // Xử lý đóng modal bằng nút ESC hoặc click bên ngoài
            $('.modal').on('click', function(e) {
                if ($(e.target).hasClass('modal')) {
                    $(this).modal('hide');
                }
            });
            
            // Kiểm tra nút đăng ký
            $('[data-target="#registerModal"]').on('click', function() {
                console.log("Register button clicked");
                $('#registerModal').modal('show');
            });
            
            // Kiểm tra nút đăng nhập
            $('[data-target="#loginModal"]').on('click', function() {
                console.log("Login button clicked");
                $('#loginModal').modal('show');
            });
            
            // Handle candidate registration form submission
            $('#candidateRegisterForm').on('submit', function(e) {
                e.preventDefault();
                // Validate form
                if ($('#candidatePassword').val() !== $('#candidateConfirmPassword').val()) {
                    alert('Mật khẩu không khớp!');
                    return;
                }
                // For demonstration, show success message and close modal
                alert('Đăng ký tài khoản ứng viên thành công!');
                $('#registerModal').modal('hide');
                
                // In a real implementation, would send data to server
                // $.ajax({ ... })
            });
            
            // Handle recruiter registration form submission
            $('#recruiterRegisterForm').on('submit', function(e) {
                e.preventDefault();
                // Validate form
                if ($('#recruiterPassword').val() !== $('#recruiterConfirmPassword').val()) {
                    alert('Mật khẩu không khớp!');
                    return;
                }
                // For demonstration, show success message and close modal
                alert('Đăng ký tài khoản nhà tuyển dụng thành công! Chúng tôi sẽ xác minh thông tin và liên hệ lại.');
                $('#registerModal').modal('hide');
                
                // In a real implementation, would send data to server
                // $.ajax({ ... })
            });
            
            // Handle login form submission
            $('#loginForm').on('submit', function(e) {
                e.preventDefault();
                
                // Get user type (candidate or recruiter)
                var userType = $('input[name="userType"]:checked').val();
                
                // Simulate login success and redirect based on user type
                $('#loginModal').modal('hide');
                
                if (userType === 'recruiter') {
                    // Redirect to recruiter dashboard
                    window.location.href = '/Client/Recruiter/Dashboard';
                } else {
                    // For candidate - display the candidate homepage
                    switchToCandidateUI();
                    
                    // Show success message
                    alert('Đăng nhập ứng viên thành công!');
                }
                
                // In a real implementation, would authenticate with server
                // $.ajax({ ... })
            });
            
            // Handle logout
            $('#logoutBtn').on('click', function(e) {
                e.preventDefault();
                switchToGuestUI();
                
                // In a real implementation, would logout on server
                // $.ajax({ ... })
                
                alert('Đăng xuất thành công!');
            });
            
            // Functions to switch between UI states
            function switchToCandidateUI() {
                // Update navigation
                $('#guest-menu').hide();
                $('#candidate-nav').show();
                $('#auth-buttons').hide();
                
                // Update homepage content
                displayCandidateHomepage();
                
                // Update username display
                var username = $('#loginEmail').val().split('@@')[0] || 'Ứng Viên';
                $('.candidate-name').text(username);
            }
            
            function switchToGuestUI() {
                // Update navigation
                $('#guest-menu').show();
                $('#candidate-nav').hide();
                $('#auth-buttons').show();
                
                // Update homepage content
                $('#guest-content').show();
                $('#candidate-dashboard').hide();
            }
            
            function displayCandidateHomepage() {
                $('#guest-content').hide();
                $('#candidate-dashboard').show();
            }
        });
    </script>
    
    @await RenderSectionAsync("Scripts", required: false)
</body>
</html>
