@{
    ViewData["Title"] = "Reports & Statistics";
    Layout = "~/Areas/Client/Views/Shared/_RecruiterLayout.cshtml";
}

<div class="container-fluid">
    <div class="d-sm-flex align-items-center justify-content-between mb-4">
        <h1 class="h3 mb-0 text-gray-800">Reports & Statistics</h1>
        <div>
            <button class="btn btn-sm btn-outline-primary mr-2">
                <i class="fas fa-download fa-sm text-primary-50 mr-1"></i> Export Report
            </button>
            <div class="btn-group">
                <button type="button" class="btn btn-sm btn-primary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    <i class="fas fa-calendar fa-sm text-white-50 mr-1"></i> Time: This Month
                </button>
                <div class="dropdown-menu dropdown-menu-right">
                    <a class="dropdown-item active" href="#">This Month</a>
                    <a class="dropdown-item" href="#">This Quarter</a>
                    <a class="dropdown-item" href="#">This Year</a>
                    <div class="dropdown-divider"></div>
                    <a class="dropdown-item" href="#">Custom</a>
                </div>
            </div>
        </div>
    </div>

    <!-- Stats Cards -->
    <div class="row">
        <div class="col-xl-3 col-md-6 mb-4">
            <div class="card border-left-primary shadow h-100 py-2">
                <div class="card-body">
                    <div class="row no-gutters align-items-center">
                        <div class="col mr-2">
                            <div class="text-xs font-weight-bold text-primary text-uppercase mb-1">
                                Job Views
                            </div>
                            <div class="h5 mb-0 font-weight-bold text-gray-800">1,243</div>
                            <div class="text-xs text-success mt-1">
                                <i class="fas fa-arrow-up mr-1"></i> 12% compared to last month
                            </div>
                        </div>
                        <div class="col-auto">
                            <i class="fas fa-eye fa-2x text-gray-300"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-xl-3 col-md-6 mb-4">
            <div class="card border-left-success shadow h-100 py-2">
                <div class="card-body">
                    <div class="row no-gutters align-items-center">
                        <div class="col mr-2">
                            <div class="text-xs font-weight-bold text-success text-uppercase mb-1">
                                Applications
                            </div>
                            <div class="h5 mb-0 font-weight-bold text-gray-800">28</div>
                            <div class="text-xs text-success mt-1">
                                <i class="fas fa-arrow-up mr-1"></i> 8% compared to last month
                            </div>
                        </div>
                        <div class="col-auto">
                            <i class="fas fa-user-plus fa-2x text-gray-300"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-xl-3 col-md-6 mb-4">
            <div class="card border-left-info shadow h-100 py-2">
                <div class="card-body">
                    <div class="row no-gutters align-items-center">
                        <div class="col mr-2">
                            <div class="text-xs font-weight-bold text-info text-uppercase mb-1">
                                Response Rate
                            </div>
                            <div class="row no-gutters align-items-center">
                                <div class="col-auto">
                                    <div class="h5 mb-0 mr-3 font-weight-bold text-gray-800">85%</div>
                                </div>
                                <div class="col">
                                    <div class="progress progress-sm mr-2">
                                        <div class="progress-bar bg-info" role="progressbar" style="width: 85%" aria-valuenow="85" aria-valuemin="0" aria-valuemax="100"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="text-xs text-success mt-1">
                                <i class="fas fa-arrow-up mr-1"></i> 5% compared to last month
                            </div>
                        </div>
                        <div class="col-auto">
                            <i class="fas fa-clipboard-list fa-2x text-gray-300"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-xl-3 col-md-6 mb-4">
            <div class="card border-left-warning shadow h-100 py-2">
                <div class="card-body">
                    <div class="row no-gutters align-items-center">
                        <div class="col mr-2">
                            <div class="text-xs font-weight-bold text-warning text-uppercase mb-1">
                                Hiring Rate
                            </div>
                            <div class="h5 mb-0 font-weight-bold text-gray-800">18%</div>
                            <div class="text-xs text-danger mt-1">
                                <i class="fas fa-arrow-down mr-1"></i> 3% compared to last month
                            </div>
                        </div>
                        <div class="col-auto">
                            <i class="fas fa-handshake fa-2x text-gray-300"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Charts Row -->
    <div class="row">
        <!-- Area Chart -->
        <div class="col-xl-8 col-lg-7">
            <div class="card shadow mb-4">
                <!-- Card Header -->
                <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                    <h6 class="m-0 font-weight-bold text-primary">Applications Over Time</h6>
                </div>
                <!-- Card Body -->
                <div class="card-body">
                    <div class="chart-area">
                        <div style="position: relative; height: 300px; width: 100%;">
                            <!-- Placeholder for chart (in a real app, this would use Chart.js or similar) -->
                            <div style="width: 100%; height: 300px; display: flex; align-items: flex-end; justify-content: space-around; border-bottom: 1px solid #e3e6f0; border-left: 1px solid #e3e6f0;">
                                <div style="background-color: #4e73df; width: 3%; height: 40%; position: relative;">
                                    <div style="position: absolute; bottom: -25px; width: 100%; text-align: center; font-size: 12px;">1</div>
                                </div>
                                <div style="background-color: #4e73df; width: 3%; height: 50%; position: relative;">
                                    <div style="position: absolute; bottom: -25px; width: 100%; text-align: center; font-size: 12px;">2</div>
                                </div>
                                <div style="background-color: #4e73df; width: 3%; height: 35%; position: relative;">
                                    <div style="position: absolute; bottom: -25px; width: 100%; text-align: center; font-size: 12px;">3</div>
                                </div>
                                <div style="background-color: #4e73df; width: 3%; height: 65%; position: relative;">
                                    <div style="position: absolute; bottom: -25px; width: 100%; text-align: center; font-size: 12px;">4</div>
                                </div>
                                <div style="background-color: #4e73df; width: 3%; height: 55%; position: relative;">
                                    <div style="position: absolute; bottom: -25px; width: 100%; text-align: center; font-size: 12px;">5</div>
                                </div>
                                <div style="background-color: #4e73df; width: 3%; height: 75%; position: relative;">
                                    <div style="position: absolute; bottom: -25px; width: 100%; text-align: center; font-size: 12px;">6</div>
                                </div>
                                <div style="background-color: #4e73df; width: 3%; height: 60%; position: relative;">
                                    <div style="position: absolute; bottom: -25px; width: 100%; text-align: center; font-size: 12px;">7</div>
                                </div>
                                <div style="background-color: #4e73df; width: 3%; height: 90%; position: relative;">
                                    <div style="position: absolute; bottom: -25px; width: 100%; text-align: center; font-size: 12px;">8</div>
                                </div>
                                <div style="background-color: #4e73df; width: 3%; height: 85%; position: relative;">
                                    <div style="position: absolute; bottom: -25px; width: 100%; text-align: center; font-size: 12px;">9</div>
                                </div>
                                <div style="background-color: #4e73df; width: 3%; height: 70%; position: relative;">
                                    <div style="position: absolute; bottom: -25px; width: 100%; text-align: center; font-size: 12px;">10</div>
                                </div>
                                <div style="background-color: #4e73df; width: 3%; height: 80%; position: relative;">
                                    <div style="position: absolute; bottom: -25px; width: 100%; text-align: center; font-size: 12px;">11</div>
                                </div>
                                <div style="background-color: #4e73df; width: 3%; height: 95%; position: relative;">
                                    <div style="position: absolute; bottom: -25px; width: 100%; text-align: center; font-size: 12px;">12</div>
                                </div>
                                <div style="background-color: #4e73df; width: 3%; height: 75%; position: relative;">
                                    <div style="position: absolute; bottom: -25px; width: 100%; text-align: center; font-size: 12px;">13</div>
                                </div>
                                <div style="background-color: #4e73df; width: 3%; height: 65%; position: relative;">
                                    <div style="position: absolute; bottom: -25px; width: 100%; text-align: center; font-size: 12px;">14</div>
                                </div>
                                <div style="background-color: #4e73df; width: 3%; height: 45%; position: relative;">
                                    <div style="position: absolute; bottom: -25px; width: 100%; text-align: center; font-size: 12px;">15</div>
                                </div>
                            </div>
                            
                            <!-- Y-axis Labels -->
                            <div style="position: absolute; left: -40px; top: 0; height: 100%; display: flex; flex-direction: column; justify-content: space-between;">
                                <div style="font-size: 12px; color: #666;">30</div>
                                <div style="font-size: 12px; color: #666;">20</div>
                                <div style="font-size: 12px; color: #666;">10</div>
                                <div style="font-size: 12px; color: #666;">0</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Pie Chart -->
        <div class="col-xl-4 col-lg-5">
            <div class="card shadow mb-4">
                <!-- Card Header -->
                <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                    <h6 class="m-0 font-weight-bold text-primary">Candidate Sources</h6>
                </div>
                <!-- Card Body -->
                <div class="card-body">
                    <div class="chart-pie pt-4 pb-2">
                        <!-- Placeholder for pie chart (in a real app, this would use Chart.js or similar) -->
                        <div style="width: 100%; height: 240px; position: relative;">
                            <div style="width: 200px; height: 200px; border-radius: 50%; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); overflow: hidden;">
                                <div style="width: 50%; height: 100%; background-color: #4e73df; position: absolute; left: 0;"></div>
                                <div style="width: 30%; height: 100%; background-color: #1cc88a; position: absolute; left: 50%; transform: rotate(180deg);"></div>
                                <div style="width: 20%; height: 100%; background-color: #36b9cc; position: absolute; left: 80%; transform: rotate(288deg);"></div>
                            </div>
                        </div>
                    </div>
                    <div class="mt-4 text-center small">
                        <span class="mr-2">
                            <i class="fas fa-circle text-primary"></i> Website (50%)
                        </span>
                        <span class="mr-2">
                            <i class="fas fa-circle text-success"></i> Facebook (30%)
                        </span>
                        <span class="mr-2">
                            <i class="fas fa-circle text-info"></i> LinkedIn (20%)
                        </span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Position Performance Table -->
    <div class="card shadow mb-4">
        <div class="card-header py-3">
            <h6 class="m-0 font-weight-bold text-primary">Performance by Position</h6>
        </div>
        <div class="card-body">
            <div class="table-responsive">
                <table class="table table-bordered" id="positionTable" width="100%" cellspacing="0">
                    <thead>
                        <tr>
                            <th>Position</th>
                            <th>Views</th>
                            <th>Applicants</th>
                            <th>Conversion Rate</th>
                            <th>Cost per Applicant</th>
                            <th>Performance</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Frontend Developer</td>
                            <td>450</td>
                            <td>12</td>
                            <td>2.7%</td>
                            <td>$25</td>
                            <td>
                                <div class="progress">
                                    <div class="progress-bar bg-success" role="progressbar" style="width: 85%" aria-valuenow="85" aria-valuemin="0" aria-valuemax="100"></div>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>Backend Developer</td>
                            <td>380</td>
                            <td>8</td>
                            <td>2.1%</td>
                            <td>$30</td>
                            <td>
                                <div class="progress">
                                    <div class="progress-bar bg-success" role="progressbar" style="width: 75%" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100"></div>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>UX/UI Designer</td>
                            <td>290</td>
                            <td>5</td>
                            <td>1.7%</td>
                            <td>$35</td>
                            <td>
                                <div class="progress">
                                    <div class="progress-bar bg-warning" role="progressbar" style="width: 60%" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100"></div>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        $(document).ready(function() {
            // Placeholder for actual chart implementation
            console.log('Charts would be implemented with Chart.js or similar library');
            
            // Toggle time period
            $('.dropdown-item').on('click', function(e) {
                e.preventDefault();
                var period = $(this).text();
                $('.dropdown-toggle').html('<i class="fas fa-calendar fa-sm text-white-50 mr-1"></i> Time: ' + period);
                $('.dropdown-item').removeClass('active');
                $(this).addClass('active');
                
                // This would trigger chart reload with new time period data
                console.log('Reload data for period:', period);
            });
        });
    </script>
} 